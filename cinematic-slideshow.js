// üé¨ ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸäŸÜŸÖÿßÿ¶Ÿä ÿßŸÑŸÖÿ∞ŸáŸÑ - ÿ£ŸÇŸàŸâ ŸÖŸÜ PowerPoint! 
// ==========================================

// ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸäŸÜŸÖÿßÿ¶Ÿä
let cinemaInterval;
let quantumParticles = [];
let cinematicAudio;
let isQuantumMode = false;

// ÿ®ÿØÿ° ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸäŸÜŸÖÿßÿ¶Ÿä ÿßŸÑŸáŸàŸÑŸäŸàŸàÿØŸä üé≠
function startHollywoodSlideshow() {
    if (cinemaInterval) {
        stopCinematicExperience();
        return;
    }
    
    // ÿ•ÿ∑ŸÑÿßŸÇ ÿ™ÿ¨ÿ±ÿ®ÿ© ÿ≥ŸäŸÜŸÖÿßÿ¶Ÿäÿ© ŸÑÿß ÿ™ŸèŸÜÿ≥Ÿâ
    launchCinematicExperience();
}

// ÿ•ÿ∑ŸÑÿßŸÇ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑÿ≥ŸäŸÜŸÖÿßÿ¶Ÿäÿ© ÿßŸÑŸÖÿ∞ŸáŸÑÿ©
function launchCinematicExperience() {
    playQuantumSound();
    
    // ÿ•ŸÜÿ¥ÿßÿ° ÿ®Ÿäÿ¶ÿ© ŸÅÿ∂ÿßÿ¶Ÿäÿ© ÿ´ŸÑÿßÿ´Ÿäÿ© ÿßŸÑÿ£ÿ®ÿπÿßÿØ
    createQuantumCinemaEnvironment();
    
    // ÿ®ÿØÿ° ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿ®ÿµÿ±Ÿäÿ© ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©
    initializeHologramSystem();
    
    // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿµŸàÿ™Ÿä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ
    activateQuantumAudio();
    
    // ÿπÿ±ÿ∂ ŸÖŸÇÿØŸÖÿ© ÿ≥ŸäŸÜŸÖÿßÿ¶Ÿäÿ© ŸÖŸÑÿ≠ŸÖŸäÿ©
    showEpicIntro().then(() => {
        startImageHologramShow();
    });
}

// ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ®Ÿäÿ¶ÿ© ÿßŸÑŸÅÿ∂ÿßÿ¶Ÿäÿ© ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©
function createQuantumCinemaEnvironment() {
    // ÿ•ÿÆŸÅÿßÿ° ŸÉŸÑ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿπÿßÿØŸä
    document.body.style.overflow = 'hidden';
    document.body.style.userSelect = 'none';
    
    // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ≠ÿ±ŸÉ ÿßŸÑŸàÿßŸÇÿπ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä
    const quantumScreen = document.createElement('div');
    quantumScreen.id = 'quantum-cinema-screen';
    quantumScreen.innerHTML = `
        <!-- ŸÖÿ≠ÿ±ŸÉ ÿßŸÑŸÅÿ∂ÿßÿ° ÿßŸÑÿÆÿßÿ±ÿ¨Ÿä -->
        <div class="quantum-space">
            <!-- ÿ∑ÿ®ŸÇÿ© ÿßŸÑŸÜÿ¨ŸàŸÖ ŸàÿßŸÑŸÖÿ¨ÿ±ÿßÿ™ -->
            <div class="cosmic-layer cosmic-layer-1">
                <div class="galaxy galaxy-1"></div>
                <div class="galaxy galaxy-2"></div>
                <div class="galaxy galaxy-3"></div>
            </div>
            <div class="cosmic-layer cosmic-layer-2">
                <div class="nebula nebula-1"></div>
                <div class="nebula nebula-2"></div>
            </div>
            <div class="cosmic-layer cosmic-layer-3">
                <div class="star-field" id="star-field"></div>
            </div>
            
            <!-- ŸÖÿ≠ÿ±ŸÉ ÿßŸÑÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿßŸÑŸÉŸÖŸäÿ© -->
            <canvas id="quantum-particles" class="quantum-canvas"></canvas>
            
            <!-- ŸÖŸÜÿµÿ© ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑŸáŸàŸÑŸàÿ¨ÿ±ÿßŸÖŸä -->
            <div class="holographic-stage-3d">
                <!-- ÿßŸÑŸÇÿßÿπÿØÿ© ÿßŸÑŸÖÿ∂Ÿäÿ¶ÿ© -->
                <div class="quantum-platform">
                    <div class="platform-rings">
                        <div class="ring ring-1"></div>
                        <div class="ring ring-2"></div>
                        <div class="ring ring-3"></div>
                        <div class="ring ring-4"></div>
                    </div>
                    <div class="energy-core"></div>
                </div>
                
                <!-- ÿ•ÿ∑ÿßÿ± ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸä -->
                <div class="hologram-frame">
                    <div class="frame-edges">
                        <div class="edge edge-tl"></div>
                        <div class="edge edge-tr"></div>
                        <div class="edge edge-bl"></div>
                        <div class="edge edge-br"></div>
                    </div>
                    
                    <!-- ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿµŸàÿ±ÿ© ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑŸàÿßŸÇÿπ ÿßŸÑŸÖÿÆÿ™ŸÑÿ∑ -->
                    <div class="quantum-image-container">
                        <div class="hologram-projector-beams">
                            <div class="beam beam-1"></div>
                            <div class="beam beam-2"></div>
                            <div class="beam beam-3"></div>
                            <div class="beam beam-4"></div>
                        </div>
                        
                        <div class="image-hologram">
                            <img id="quantum-image" src="" alt="" />
                            <div class="hologram-scan-lines"></div>
                            <div class="quantum-glow"></div>
                            <div class="data-matrix"></div>
                        </div>
                        
                        <!-- ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿ∑ÿßŸÇÿ© ÿßŸÑŸÖÿ≠Ÿäÿ∑ÿ© -->
                        <div class="energy-field-container">
                            <div class="energy-wave energy-wave-1"></div>
                            <div class="energy-wave energy-wave-2"></div>
                            <div class="energy-wave energy-wave-3"></div>
                        </div>
                    </div>
                </div>
                
                <!-- ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸäÿ© -->
                <div class="quantum-info-panel">
                    <div class="panel-background">
                        <div class="circuit-pattern"></div>
                        <div class="data-flow"></div>
                    </div>
                    
                    <div class="info-content">
                        <div class="title-container">
                            <div class="title-glow"></div>
                            <h1 id="quantum-title"></h1>
                            <div class="title-underline"></div>
                        </div>
                        
                        <div class="description-container">
                            <div class="typing-effect">
                                <p id="quantum-description"></p>
                                <span class="cursor">|</span>
                            </div>
                        </div>
                        
                        <div class="quantum-stats">
                            <div class="stat-item">
                                <span class="stat-label">SEQUENCE</span>
                                <span class="stat-value" id="quantum-counter">001</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">TOTAL</span>
                                <span class="stat-value">${String(imagesData.length).padStart(3, '0')}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">STATUS</span>
                                <span class="stat-value status-active">ACTIVE</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿ™ŸÇÿØŸÖ ÿßŸÑŸÉŸÖŸä -->
            <div class="quantum-progress-system">
                <div class="progress-background">
                    <div class="progress-grid"></div>
                </div>
                <div class="progress-bar-quantum" id="quantum-progress">
                    <div class="progress-energy-flow"></div>
                    <div class="progress-particles-trail"></div>
                </div>
                <div class="progress-markers">
                    ${Array.from({length: imagesData.length}, (_, i) => 
                        `<div class="marker marker-${i + 1}" data-index="${i}"></div>`
                    ).join('')}
                </div>
            </div>
            
            <!-- ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ -->
            <div class="quantum-control-panel">
                <div class="control-background">
                    <div class="control-circuits"></div>
                </div>
                
                <div class="control-buttons">
                    <button class="quantum-btn quantum-pause" id="quantum-pause-btn">
                        <div class="btn-background"></div>
                        <div class="btn-icon">‚è∏</div>
                        <div class="btn-text">PAUSE</div>
                        <div class="btn-energy"></div>
                    </button>
                    
                    <button class="quantum-btn quantum-fullscreen" id="quantum-fullscreen-btn">
                        <div class="btn-background"></div>
                        <div class="btn-icon">‚õ∂</div>
                        <div class="btn-text">IMMERSE</div>
                        <div class="btn-energy"></div>
                    </button>
                    
                    <button class="quantum-btn quantum-next" id="quantum-next-btn">
                        <div class="btn-background"></div>
                        <div class="btn-icon">‚ñ∂</div>
                        <div class="btn-text">NEXT</div>
                        <div class="btn-energy"></div>
                    </button>
                    
                    <button class="quantum-btn quantum-exit" id="quantum-exit-btn">
                        <div class="btn-background"></div>
                        <div class="btn-icon">‚úï</div>
                        <div class="btn-text">EXIT</div>
                        <div class="btn-energy"></div>
                    </button>
                </div>
                
                <!-- ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ -->
                <div class="system-indicators">
                    <div class="indicator quantum-active">
                        <div class="indicator-light"></div>
                        <span>QUANTUM ENGINE</span>
                    </div>
                    <div class="indicator hologram-active">
                        <div class="indicator-light"></div>
                        <span>HOLOGRAM SYSTEM</span>
                    </div>
                    <div class="indicator audio-active">
                        <div class="indicator-light"></div>
                        <span>SPATIAL AUDIO</span>
                    </div>
                </div>
            </div>
            
            <!-- ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿ®Ÿäÿ¶ÿ© ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ© -->
            <div class="environmental-effects">
                <!-- ÿ£ŸÖÿ∑ÿßÿ± ÿßŸÑÿ∂Ÿàÿ° -->
                <div class="light-rain" id="light-rain"></div>
                
                <!-- ÿßŸÑÿ¥ŸÅŸÇ ÿßŸÑŸÇÿ∑ÿ®Ÿä -->
                <div class="quantum-aurora">
                    <div class="aurora-band aurora-band-1"></div>
                    <div class="aurora-band aurora-band-2"></div>
                    <div class="aurora-band aurora-band-3"></div>
                </div>
                
                <!-- ÿ∫ÿ®ÿßÿ± ŸÅÿ∂ÿßÿ¶Ÿä -->
                <div class="cosmic-dust" id="cosmic-dust"></div>
                
                <!-- ŸàŸÖŸäÿ∂ ÿßŸÑÿ∑ÿßŸÇÿ© -->
                <div class="energy-flashes" id="energy-flashes"></div>
            </div>
            
            <!-- ÿ±ÿ≥ÿßÿ¶ŸÑ ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿ© ŸÖÿπ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä -->
            <div class="quantum-messages" id="quantum-messages"></div>
            
            <!-- ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ≤ŸÖŸÉÿßŸÜ -->
            <div class="spacetime-distortion">
                <div class="warp-field"></div>
                <div class="time-dilation"></div>
            </div>
        </div>
    `;
    
    // ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑŸÅÿ∂ÿßÿ¶Ÿäÿ© ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©
    quantumScreen.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: 
            radial-gradient(ellipse at 25% 25%, rgba(50, 0, 150, 0.3) 0%, transparent 50%),
            radial-gradient(ellipse at 75% 75%, rgba(150, 0, 50, 0.3) 0%, transparent 50%),
            radial-gradient(ellipse at 50% 50%, rgba(0, 50, 150, 0.2) 0%, transparent 70%),
            linear-gradient(45deg, #000000 0%, #0a0a0a 50%, #000000 100%);
        z-index: 999999;
        overflow: hidden;
        perspective: 3000px;
        transform-style: preserve-3d;
        cursor: none;
        font-family: 'Orbitron', 'Cairo', sans-serif;
    `;
    
    document.body.appendChild(quantumScreen);
    
    // ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÜÿ∏ŸÖ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©
    setTimeout(() => {
        initializeQuantumParticleEngine();
        createStarField();
        setupAdvancedControls();
        startEnvironmentalEffects();
    }, 100);
}

// ÿ™ŸÅÿπŸäŸÑ ŸÖÿ≠ÿ±ŸÉ ÿßŸÑÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿßŸÑŸÉŸÖŸäÿ©
function initializeQuantumParticleEngine() {
    const canvas = document.getElementById('quantum-particles');
    if (!canvas) return;
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const ctx = canvas.getContext('2d');
    
    // ŸÜÿ∏ÿßŸÖ ÿ¨ÿ≥ŸäŸÖÿßÿ™ ŸÖÿ™ŸÇÿØŸÖ ŸÖÿπ ÿ∞ŸÉÿßÿ° ÿßÿµÿ∑ŸÜÿßÿπŸä
    const particleSystem = {
        particles: [],
        mouseX: canvas.width / 2,
        mouseY: canvas.height / 2,
        time: 0,
        
        // ÿ•ÿ∂ÿßŸÅÿ© ÿ¨ÿ≥ŸäŸÖÿ© ŸÉŸÖŸäÿ© ÿ¨ÿØŸäÿØÿ©
        addQuantumParticle(x, y) {
            this.particles.push({
                x: x || Math.random() * canvas.width,
                y: y || Math.random() * canvas.height,
                z: Math.random() * 2000 - 1000,
                vx: (Math.random() - 0.5) * 4,
                vy: (Math.random() - 0.5) * 4,
                vz: (Math.random() - 0.5) * 8,
                size: Math.random() * 4 + 1,
                life: 1.0,
                decay: Math.random() * 0.005 + 0.002,
                color: {
                    h: Math.random() * 360,
                    s: 80 + Math.random() * 20,
                    l: 60 + Math.random() * 30
                },
                type: Math.random() < 0.3 ? 'energy' : 'matter',
                spin: Math.random() * 0.2 - 0.1,
                phase: Math.random() * Math.PI * 2,
                energy: Math.random() * 100 + 50
            });
        },
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÜÿ∏ÿßŸÖ
        update() {
            this.time += 0.016;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÉŸÑ ÿ¨ÿ≥ŸäŸÖÿ©
            this.particles.forEach((particle, index) => {
                // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑŸÅŸäÿ≤Ÿäÿßÿ¶Ÿäÿ©
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const distanceToCenter = Math.sqrt(
                    (particle.x - centerX) ** 2 + (particle.y - centerY) ** 2
                );
                
                // ÿ¨ÿßÿ∞ÿ®Ÿäÿ© ŸÜÿ≠Ÿà ÿßŸÑŸÖÿ±ŸÉÿ≤
                const gravityForce = 100 / (distanceToCenter + 100);
                const angle = Math.atan2(centerY - particle.y, centerX - particle.x);
                particle.vx += Math.cos(angle) * gravityForce * 0.001;
                particle.vy += Math.sin(angle) * gravityForce * 0.001;
                
                // ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑŸÖÿßŸàÿ≥
                const mouseDistance = Math.sqrt(
                    (particle.x - this.mouseX) ** 2 + (particle.y - this.mouseY) ** 2
                );
                
                if (mouseDistance < 150) {
                    const repelForce = (150 - mouseDistance) / 150;
                    const repelAngle = Math.atan2(particle.y - this.mouseY, particle.x - this.mouseX);
                    particle.vx += Math.cos(repelAngle) * repelForce * 0.5;
                    particle.vy += Math.sin(repelAngle) * repelForce * 0.5;
                    particle.energy += repelForce * 10;
                }
                
                // ÿ≠ÿ±ŸÉÿ© ŸÖÿØÿßÿ±Ÿäÿ©
                particle.phase += particle.spin;
                particle.vx += Math.cos(particle.phase) * 0.1;
                particle.vy += Math.sin(particle.phase) * 0.1;
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸàÿ∂ÿπ
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.z += particle.vz;
                
                // ÿ≠ÿØŸàÿØ ÿßŸÑÿ¥ÿßÿ¥ÿ© ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿßÿÆÿ™ŸÅÿßÿ°/ÿßŸÑÿ∏ŸáŸàÿ±
                if (particle.x < -50) particle.x = canvas.width + 50;
                if (particle.x > canvas.width + 50) particle.x = -50;
                if (particle.y < -50) particle.y = canvas.height + 50;
                if (particle.y > canvas.height + 50) particle.y = -50;
                
                // ÿ≠ÿØŸàÿØ ÿßŸÑÿπŸÖŸÇ
                if (particle.z < -1000) particle.z = 1000;
                if (particle.z > 1000) particle.z = -1000;
                
                // ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ≠Ÿäÿßÿ© ŸàÿßŸÑÿ∑ÿßŸÇÿ©
                particle.life -= particle.decay;
                particle.energy *= 0.998;
                
                // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿßŸÑŸÖŸäÿ™ÿ©
                if (particle.life <= 0) {
                    this.particles.splice(index, 1);
                }
            });
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿ¨ÿØŸäÿØÿ©
            if (this.particles.length < 300 && Math.random() < 0.1) {
                this.addQuantumParticle();
            }
        },
        
        // ÿ±ÿ≥ŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ
        render() {
            // ŸÖÿ≥ÿ≠ ÿßŸÑÿ¥ÿßÿ¥ÿ© ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ∞ŸäŸÑ
            ctx.fillStyle = 'rgba(0, 0, 0, 0.02)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ÿ±ÿ≥ŸÖ ÿßŸÑÿ¨ÿ≥ŸäŸÖÿßÿ™ ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©
            this.particles.forEach(particle => {
                // ÿ≠ÿ≥ÿßÿ® ÿßŸÑŸÖŸÜÿ∏Ÿàÿ± ÿ´ŸÑÿßÿ´Ÿä ÿßŸÑÿ£ÿ®ÿπÿßÿØ
                const perspective = 1000;
                const scale = perspective / (perspective + particle.z);
                const x2d = (particle.x - canvas.width / 2) * scale + canvas.width / 2;
                const y2d = (particle.y - canvas.height / 2) * scale + canvas.height / 2;
                
                if (scale <= 0) return;
                
                const size = particle.size * scale;
                const alpha = particle.life * scale;
                const energy = Math.min(particle.energy / 100, 1);
                
                // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÑŸàŸÜ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ∑ÿßŸÇÿ© ŸàÿßŸÑŸÜŸàÿπ
                const hue = particle.color.h + (energy * 60);
                const saturation = particle.color.s + (energy * 20);
                const lightness = particle.color.l + (energy * 20);
                
                if (particle.type === 'energy') {
                    // ÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿßŸÑÿ∑ÿßŸÇÿ© ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ŸÜÿ¨ŸÖŸäÿ©
                    const gradient = ctx.createRadialGradient(x2d, y2d, 0, x2d, y2d, size * 4);
                    gradient.addColorStop(0, `hsla(${hue}, ${saturation}%, ${lightness}%, ${alpha})`);
                    gradient.addColorStop(0.3, `hsla(${hue}, ${saturation}%, ${lightness * 0.8}%, ${alpha * 0.8})`);
                    gradient.addColorStop(0.7, `hsla(${hue}, ${saturation}%, ${lightness * 0.5}%, ${alpha * 0.4})`);
                    gradient.addColorStop(1, 'transparent');
                    
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(x2d, y2d, size * 4, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // ÿ±ÿ≥ŸÖ ÿßŸÑŸÜŸàÿßÿ© ÿßŸÑŸÖÿ∂Ÿäÿ¶ÿ©
                    ctx.fillStyle = `hsla(${hue}, 100%, 90%, ${alpha})`;
                    ctx.beginPath();
                    ctx.arc(x2d, y2d, size * 0.5, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // ÿÆÿ∑Ÿàÿ∑ ÿßŸÑÿ∑ÿßŸÇÿ© ÿßŸÑŸÖÿ¥ÿπÿ©
                    for (let i = 0; i < 4; i++) {
                        const angle = (particle.phase + i * Math.PI / 2);
                        const lineLength = size * 6 * energy;
                        const endX = x2d + Math.cos(angle) * lineLength;
                        const endY = y2d + Math.sin(angle) * lineLength;
                        
                        ctx.strokeStyle = `hsla(${hue}, 80%, 80%, ${alpha * 0.3})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(x2d, y2d);
                        ctx.lineTo(endX, endY);
                        ctx.stroke();
                    }
                } else {
                    // ÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿßŸÑŸÖÿßÿØÿ© ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ŸÉŸÖŸäÿ©
                    const gradient = ctx.createRadialGradient(x2d, y2d, 0, x2d, y2d, size * 2);
                    gradient.addColorStop(0, `hsla(${hue}, ${saturation}%, ${lightness}%, ${alpha})`);
                    gradient.addColorStop(0.5, `hsla(${hue}, ${saturation}%, ${lightness * 0.7}%, ${alpha * 0.6})`);
                    gradient.addColorStop(1, 'transparent');
                    
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(x2d, y2d, size * 2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // ÿ±ÿ≥ŸÖ ÿßŸÑÿ≠ŸÑŸÇÿ© ÿßŸÑŸÉŸÖŸäÿ©
                    ctx.strokeStyle = `hsla(${hue}, 70%, 60%, ${alpha * 0.8})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.arc(x2d, y2d, size * 3, 0, Math.PI * 2);
                    ctx.stroke();
                }
            });
            
            // ÿ±ÿ≥ŸÖ ÿÆÿ∑Ÿàÿ∑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸäŸÜ ÿßŸÑÿ¨ÿ≥ŸäŸÖÿßÿ™
            this.particles.forEach((particle1, i) => {
                this.particles.slice(i + 1).forEach(particle2 => {
                    const distance = Math.sqrt(
                        (particle1.x - particle2.x) ** 2 + 
                        (particle1.y - particle2.y) ** 2
                    );
                    
                    if (distance < 100) {
                        const scale1 = 1000 / (1000 + particle1.z);
                        const scale2 = 1000 / (1000 + particle2.z);
                        
                        const x1 = (particle1.x - canvas.width / 2) * scale1 + canvas.width / 2;
                        const y1 = (particle1.y - canvas.height / 2) * scale1 + canvas.height / 2;
                        const x2 = (particle2.x - canvas.width / 2) * scale2 + canvas.width / 2;
                        const y2 = (particle2.y - canvas.height / 2) * scale2 + canvas.height / 2;
                        
                        const opacity = (100 - distance) / 100 * particle1.life * particle2.life * 0.2;
                        
                        ctx.strokeStyle = `rgba(100, 200, 255, ${opacity})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(x1, y1);
                        ctx.lineTo(x2, y2);
                        ctx.stroke();
                    }
                });
            });
        }
    };
    
    // ÿ™ŸÅÿπŸäŸÑ ÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖÿßŸàÿ≥ ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©
    canvas.addEventListener('mousemove', (e) => {
        particleSystem.mouseX = e.clientX;
        particleSystem.mouseY = e.clientY;
        
        // ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÜŸÅÿ¨ÿßÿ± ÿ∑ÿßŸÇÿ© ÿπŸÜÿØ ÿ≠ÿ±ŸÉÿ© ÿßŸÑŸÖÿßŸàÿ≥
        if (Math.random() < 0.3) {
            for (let i = 0; i < 5; i++) {
                particleSystem.addQuantumParticle(
                    e.clientX + (Math.random() - 0.5) * 100,
                    e.clientY + (Math.random() - 0.5) * 100
                );
            }
        }
    });
    
    // ÿ•ÿ∂ÿßŸÅÿ© ÿ¨ÿ≥ŸäŸÖÿßÿ™ ÿ£ŸàŸÑŸäÿ©
    for (let i = 0; i < 150; i++) {
        particleSystem.addQuantumParticle();
    }
    
    // ÿ≠ŸÑŸÇÿ© ÿßŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
    function quantumLoop() {
        particleSystem.update();
        particleSystem.render();
        requestAnimationFrame(quantumLoop);
    }
    
    quantumLoop();
}

// ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ŸÇŸÑ ÿßŸÑŸÜÿ¨ŸàŸÖ ÿßŸÑÿ™ŸÅÿßÿπŸÑŸä
function createStarField() {
    const starField = document.getElementById('star-field');
    if (!starField) return;
    
    // ÿ•ŸÜÿ¥ÿßÿ° ŸÜÿ¨ŸàŸÖ ÿ´ŸÑÿßÿ´Ÿäÿ© ÿßŸÑÿ£ÿ®ÿπÿßÿØ
    for (let i = 0; i < 500; i++) {
        const star = document.createElement('div');
        star.className = 'quantum-star';
        
        const size = Math.random() * 3 + 1;
        const x = Math.random() * 100;
        const y = Math.random() * 100;
        const z = Math.random() * 1000;
        const twinkleSpeed = Math.random() * 3 + 1;
        
        star.style.cssText = `
            position: absolute;
            width: ${size}px;
            height: ${size}px;
            left: ${x}%;
            top: ${y}%;
            background: radial-gradient(circle, #ffffff, transparent);
            border-radius: 50%;
            animation: twinkle ${twinkleSpeed}s infinite alternate;
            transform: translateZ(${z}px);
            box-shadow: 0 0 ${size * 2}px rgba(255, 255, 255, 0.8);
        `;
        
        starField.appendChild(star);
    }
}

// ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ™ŸÇÿØŸÖ
function setupAdvancedControls() {
    const pauseBtn = document.getElementById('quantum-pause-btn');
    const fullscreenBtn = document.getElementById('quantum-fullscreen-btn');
    const nextBtn = document.getElementById('quantum-next-btn');
    const exitBtn = document.getElementById('quantum-exit-btn');
    
    // ÿ£ÿµŸàÿßÿ™ ŸÉŸÖŸäÿ© ŸÑŸÑÿ£ÿ≤ÿ±ÿßÿ±
    const quantumBeep = () => {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.1);
        
        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.1);
    };
    
    pauseBtn?.addEventListener('click', () => {
        quantumBeep();
        // ŸÖŸÜÿ∑ŸÇ ÿßŸÑÿ•ŸäŸÇÿßŸÅ/ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ
    });
    
    fullscreenBtn?.addEventListener('click', () => {
        quantumBeep();
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    });
    
    nextBtn?.addEventListener('click', () => {
        quantumBeep();
        // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ŸÑŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ© ŸÅŸàÿ±ÿßŸã
    });
    
    exitBtn?.addEventListener('click', () => {
        quantumBeep();
        stopCinematicExperience();
    });
}

// ÿ®ÿØÿ° ÿßŸÑÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿßŸÑÿ®Ÿäÿ¶Ÿäÿ©
function startEnvironmentalEffects() {
    // ŸÖÿ∑ÿ± ÿßŸÑÿ∂Ÿàÿ°
    createLightRain();
    
    // ÿßŸÑÿ¥ŸÅŸÇ ÿßŸÑŸÇÿ∑ÿ®Ÿä ÿßŸÑŸÉŸÖŸä
    createQuantumAurora();
    
    // ÿ∫ÿ®ÿßÿ± ŸÅÿ∂ÿßÿ¶Ÿä
    createCosmicDust();
    
    // ŸàŸÖŸäÿ∂ ÿßŸÑÿ∑ÿßŸÇÿ©
    createEnergyFlashes();
}

// ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿµŸàÿ™Ÿä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ
function activateQuantumAudio() {
    // ÿ•ŸÜÿ¥ÿßÿ° ŸÖŸàÿ≥ŸäŸÇŸâ ŸÅÿ∂ÿßÿ¶Ÿäÿ© ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿ©
    try {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        // ŸÖŸàŸÑÿØ ŸÜÿ∫ŸÖÿßÿ™ ŸÅÿ∂ÿßÿ¶Ÿäÿ©
        const createSpaceAmbience = () => {
            const oscillator1 = audioContext.createOscillator();
            const oscillator2 = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            const filter = audioContext.createBiquadFilter();
            
            oscillator1.type = 'sine';
            oscillator2.type = 'triangle';
            filter.type = 'lowpass';
            filter.frequency.value = 200;
            
            oscillator1.connect(filter);
            oscillator2.connect(filter);
            filter.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator1.frequency.setValueAtTime(80, audioContext.currentTime);
            oscillator2.frequency.setValueAtTime(120, audioContext.currentTime);
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 2);
            
            oscillator1.start(audioContext.currentTime);
            oscillator2.start(audioContext.currentTime);
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿØŸäŸÜÿßŸÖŸäŸÉŸä ŸÑŸÑÿ™ÿ±ÿØÿØÿßÿ™
            setInterval(() => {
                const time = audioContext.currentTime;
                oscillator1.frequency.setValueAtTime(
                    80 + Math.sin(time * 0.1) * 20, time
                );
                oscillator2.frequency.setValueAtTime(
                    120 + Math.cos(time * 0.15) * 30, time
                );
            }, 100);
        };
        
        createSpaceAmbience();
    } catch (e) {
        console.log('Audio context not available');
    }
}

// ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑÿ≥ŸäŸÜŸÖÿßÿ¶Ÿäÿ©
function stopCinematicExperience() {
    const quantumScreen = document.getElementById('quantum-cinema-screen');
    if (quantumScreen) {
        // ÿ™ÿ£ÿ´Ÿäÿ± ÿ•ÿ∫ŸÑÿßŸÇ ŸÖÿ∞ŸáŸÑ
        quantumScreen.style.animation = 'quantumCollapse 1s ease-in forwards';
        
        setTimeout(() => {
            quantumScreen.remove();
            document.body.style.overflow = '';
            document.body.style.userSelect = '';
            
            // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿπÿßÿØŸä ŸÖÿπ ÿ™ÿ£ÿ´Ÿäÿ± ÿ±ÿßÿ¶ÿπ
            showMainContent();
        }, 1000);
    }
    
    if (cinemaInterval) {
        clearInterval(cinemaInterval);
        cinemaInterval = null;
    }
}

// ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ ÿØÿßŸÑÿ© startSlideshow ÿßŸÑÿ£ÿµŸÑŸäÿ©
if (typeof startSlideshow === 'function') {
    window.originalStartSlideshow = startSlideshow;
    window.startSlideshow = startHollywoodSlideshow;
}

console.log('üé¨ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ≥ŸäŸÜŸÖÿßÿ¶Ÿä ÿßŸÑŸÖÿ∞ŸáŸÑ ÿ¨ÿßŸáÿ≤! üöÄ'); 